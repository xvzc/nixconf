#compdef nid

_nid() {
  local -a options

  options=( \
    $( \
    nix flake show $NIXOS_CONFIG --json &> /dev/null \
      | jq -r ".devShells[\"$NIXOS_SYSTEM\"] | keys[]" \
      ) \
    )

  _describe "command" options
}
